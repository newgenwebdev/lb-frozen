# ============================================================
# LB FROZEN SERVER ENVIRONMENT CONFIGURATION
# ============================================================
# Copy this file to .env and fill in your values
# NEVER commit .env to version control!
#
# Generate secure secrets using:
#   node -e "console.log(require('crypto').randomBytes(64).toString('hex'))"
# Or online: https://generate-secret.vercel.app/64
# ============================================================

# === ENVIRONMENT ===
NODE_ENV=development

# === DATABASE ===
# PostgreSQL connection string
# Format: postgresql://USER:PASSWORD@HOST:PORT/DATABASE
DATABASE_URL=postgresql://postgres:YOUR_SECURE_PASSWORD@localhost:5432/lb_frozen

# === PUBLIC URL ===
# The public URL where the backend is accessible
BACKEND_PUBLIC_URL=http://localhost:9000

# The public URL where the storefront is accessible (for email links)
STOREFRONT_URL=http://localhost:3000

# === CORS CONFIGURATION ===
# Comma-separated list of allowed origins
# IMPORTANT: Remove localhost URLs in production!
ADMIN_CORS=http://localhost:3001
STORE_CORS=http://localhost:3000
AUTH_CORS=http://localhost:3000,http://localhost:3001

# === SECURITY SECRETS ===
# CRITICAL: Generate unique, random 64+ character strings for these!
# Use: node -e "console.log(require('crypto').randomBytes(64).toString('hex'))"
#
# JWT_SECRET is used to sign authentication tokens
# If compromised, attackers can forge any user's identity
JWT_SECRET=REPLACE_WITH_64_CHAR_RANDOM_STRING

# COOKIE_SECRET is used to sign session cookies
# If compromised, attackers can forge session data
COOKIE_SECRET=REPLACE_WITH_64_CHAR_RANDOM_STRING

# === ADMIN ACCOUNT ===
# Initial admin account credentials
# IMPORTANT: Use a strong, unique password!
# Minimum: 16 characters, mix of upper/lower/numbers/symbols
MEDUSA_ADMIN_EMAIL=admin@yourdomain.com
MEDUSA_ADMIN_PASSWORD=REPLACE_WITH_STRONG_PASSWORD

# === FILE STORAGE (MinIO/S3) ===
# MinIO or S3-compatible storage configuration
MINIO_ENDPOINT=your-minio-endpoint.com
MINIO_ACCESS_KEY=YOUR_MINIO_ACCESS_KEY
MINIO_SECRET_KEY=YOUR_MINIO_SECRET_KEY
MINIO_BUCKET=lb-frozen

# === REDIS (Optional) ===
# Required for workflow engine in production
# REDIS_URL=redis://localhost:6379

# === SEARCH (Optional) ===
# Meilisearch configuration
# MEILISEARCH_HOST=http://localhost:7700
# MEILISEARCH_ADMIN_KEY=YOUR_MEILISEARCH_MASTER_KEY

# === EMAIL (Optional) ===
# Resend configuration for transactional emails
# RESEND_API_KEY=re_xxxxxxxxxxxx
# RESEND_FROM_EMAIL=noreply@yourdomain.com
# EMAIL_LOGO_URL=https://your-bucket.s3.amazonaws.com/logo.png

# === PAYMENT (Stripe) ===
# Get keys from: https://dashboard.stripe.com/apikeys
# Use test keys (sk_test_/pk_test_) for development
# Use live keys (sk_live_/pk_live_) for production - NEVER commit live keys!
STRIPE_API_KEY=sk_test_YOUR_STRIPE_TEST_KEY
STRIPE_PUBLISHABLE_KEY=pk_test_YOUR_STRIPE_PUBLISHABLE_KEY
STRIPE_WEBHOOK_SECRET=whsec_YOUR_WEBHOOK_SECRET

# === EASYPARCEL SHIPPING ===
# Get API key from: https://developers.easyparcel.com/
# Use demo key for development, live key for production
EASYPARCEL_API_KEY=YOUR_EASYPARCEL_API_KEY
# Set to "true" for demo environment, "false" for production
EASYPARCEL_USE_DEMO=true
# Set to "true" to simulate payment with dummy AWB (for development without credits)
# This bypasses the actual EasyParcel payment API and generates mock tracking numbers
EASYPARCEL_MOCK_PAYMENT=false

# === MEMBERSHIP & POINTS CONFIG ===
# Membership price in cents (999 = $9.99)
MEMBERSHIP_DEFAULT_PRICE=999

# Points earning: "percentage" or "fixed"
POINTS_EARNING_TYPE=percentage

# If percentage: earn 5% of order total as points
# If fixed: earn this many points per order
POINTS_EARNING_RATE=5

# Points redemption rate (0.01 = 100 points = $1)
POINTS_REDEMPTION_RATE=0.01

# Enable/disable points system
POINTS_ENABLED=true

# ============================================================
# SECURITY CHECKLIST BEFORE PRODUCTION:
# ============================================================
# [ ] Generated unique JWT_SECRET (64+ random chars)
# [ ] Generated unique COOKIE_SECRET (64+ random chars)
# [ ] Changed admin password to strong unique value
# [ ] Removed all localhost URLs from CORS settings
# [ ] Using production database with secure password
# [ ] Using production MinIO/S3 credentials
# [ ] Using live Stripe keys (sk_live_)
# [ ] Set up Stripe webhook secret
# [ ] Enabled REDIS for workflow engine
# [ ] Set NODE_ENV=production
# ============================================================
